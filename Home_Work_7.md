# Домашнее задание к занятию «Компьютерные сети. Лекция 2»

------

## Задание

1. Проверьте список доступных сетевых интерфейсов на вашем компьютере. Какие команды есть для этого в Linux и в Windows?

### Ответ:

В Linux по умолчанию есть команда `ip link`

В Windows `ipconfig /all`

2. Какой протокол используется для распознавания соседа по сетевому интерфейсу? Какой пакет и команды есть в Linux для этого?

### Ответ:

Для обнаружения соседних сетевых устройств используется протокол LLDP.

В Linux это пакет `lldpd`
Команда чтобы ппросмотреть соседей: `lldpcli show neighbors`

3. Какая технология используется для разделения L2-коммутатора на несколько виртуальных сетей? Какой пакет и команды есть в Linux для этого? Приведите пример конфига.

### Ответ:

Технология 802.1q(VLAN), в Linux для создания VLAN интерфейсов и управления ими является одноименный пакет `vlan` но он устарел и рекомендуется использовать iproute2 команда `ip link`


4. Какие типы агрегации интерфейсов есть в Linux? Какие опции есть для балансировки нагрузки? Приведите пример конфига.

### Ответ:
Типы агрегации приведены ниже:
```
Mode-0(balance-rr) – Данный режим используется по умолчанию. Balance-rr обеспечивается балансировку нагрузки и отказоустойчивость. В данном режиме сетевые пакеты отправляются “по кругу”, от первого интерфейса к последнему. Если выходят из строя интерфейсы, пакеты отправляются на остальные оставшиеся. Дополнительной настройки коммутатора не требуется при нахождении портов в одном коммутаторе. При разностных коммутаторах требуется дополнительная настройка.

Mode-1(active-backup) – Один из интерфейсов работает в активном режиме, остальные в ожидающем. При обнаружении проблемы на активном интерфейсе производится переключение на ожидающий интерфейс. Не требуется поддержки от коммутатора.

Mode-2(balance-xor) – Передача пакетов распределяется по типу входящего и исходящего трафика по формуле ((MAC src) XOR (MAC dest)) % число интерфейсов. Режим дает балансировку нагрузки и отказоустойчивость. Не требуется дополнительной настройки коммутатора/коммутаторов.

Mode-3(broadcast) – Происходит передача во все объединенные интерфейсы, тем самым обеспечивая отказоустойчивость. Рекомендуется только для использования MULTICAST трафика.

Mode-4(802.3ad) – динамическое объединение одинаковых портов. В данном режиме можно значительно увеличить пропускную способность входящего так и исходящего трафика. Для данного режима необходима поддержка и настройка коммутатора/коммутаторов.

Mode-5(balance-tlb) – Адаптивная балансировки нагрузки трафика. Входящий трафик получается только активным интерфейсом, исходящий распределяется в зависимости от текущей загрузки канала каждого интерфейса. Не требуется специальной поддержки и настройки коммутатора/коммутаторов.

Mode-6(balance-alb) – Адаптивная балансировка нагрузки. Отличается более совершенным алгоритмом балансировки нагрузки чем Mode-5). Обеспечивается балансировку нагрузки как исходящего так и входящего трафика. Не требуется специальной поддержки и настройки коммутатора/коммутаторов. rerf"?
```
```
Опции используемые режимами Mode-2 и Mode-4:
layer2:Канал для отправки пакета однозначно определяется комбинацией MAC-адресов источника и назначения по следующей формуле:
(source_MAC XOR destination_MAC) modulo slave_count
т.е. над МАС-адресами источника и назначения выполняется битовая операция XOR (исключающее ИЛИ), и результат в виде числа делится на число каналов в соединении
layer2+3:Трафик между определённой парой хостов IP всегда идёт по определённому каналу. Благодаря этому обеспечивается более равномерная балансировка трафика, особенно в случае, когда бóльшая его часть передаётся через промежуточные маршрутизаторы.
layer3+4:Благодаря этому трафик определённого узла может распределяться между несколькими каналами, хотя пакеты одного и того же TCP-соединения или UDP-потока всегда передаются по одному и тому же каналу
```
![изображение](https://user-images.githubusercontent.com/123881243/232570255-08a0806b-7ffd-4829-b024-9bf6ebb78f20.png)

В конфигурации выбран Mode-2 и алгоритм layer3+4

5. Сколько IP-адресов в сети с маской /29 ? Сколько /29 подсетей можно получить из сети с маской /24. Приведите несколько примеров /29 подсетей внутри сети 10.10.10.0/24.

### Ответ:


В /29 это 255.255.255.248, соответственно используемых адресов всего 8 из них 1 адрес сети,2 широковещательный и соответственно остается 6 адресов для назначения хостам.
В сети с маской /24,  можно выделить 32 сети с маской /29
Пример одной из таких сетей:

192.168.1.0/24 -> 192.168.1.0/29:
* Адрес сети 192.168.1.0
* Адрес Широковещательный 192.168.1.7
* Адреса для хостов с 192.168.1.1 по 192.168.1.6 включительно.

6. Задача: вас попросили организовать стык между двумя организациями. Диапазоны 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16 уже заняты. Из какой подсети допустимо взять частные IP-адреса? Маску выберите из расчёта — максимум 40–50 хостов внутри подсети.
### Ответ: 

Адресацию возьмём из диапазона `100.64.0.0/10`
Исходя из ТЗ подойдёт сеть /26
100.64.0.0/26:
Всего 62 хоста, 100.64.0.0 адрес сети и 100.64.0.63 широковещательный. 

7. Как проверить ARP-таблицу в Linux, Windows? Как очистить ARP-кеш полностью? Как из ARP-таблицы удалить только один нужный IP?

### Ответ:

Чтобы проверить ARP таблицу:

В Windows команда `arp -a`

В Linux соседство проверить можно с помощью команды `ip neighbor show`

Для очистки ARP таблицы на Win машине из под администратора необходимо открыть cmd и дать команду `arp -d`

Для очистки таблицы соседств в Linux команда `ip neighbor flush all`

Для удаления конкретного хоста из таблиц:

Windows `arp -d {ip address}`

Linux `ip neighbor flush {ip address}`

---

